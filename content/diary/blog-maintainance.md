---
title: "新ブログをまともに整備しました"
date: 2023-07-16T15:24:16+09:00
draft: false
categories: []
tags: ["ブログ"]
keywords:
---

お久しぶりです。

ご覧の通り、弊サイトを整備し、旧コンテンツがまとまりました。

うれしい！

<!-- more -->

## やったこと

### はてなブログデータをHugoに移植

こちらのプログラムを使って自動で変換しました。

<div class="iframely-embed"><div class="iframely-responsive" style="height: 140px; padding-bottom: 0;"><a href="https://michimani.net/post/development-transition-hatena-blog-to-hugo/" data-iframely-url="//iframely.net/Do5Drrl?card=small"></a></div></div><script async src="//iframely.net/embed.js"></script>

(前々から移行する！！！って言いつつもできていなかったのはこのプログラムが動かず面倒だなーと思っていたからです。Docker に入らずに実行していたのが失敗の原因だったので、ちゃんとやれば動きました……。)

この移植をする上で不都合だったので適当にフォークしていじって書き直したプログラムを使い移植が完了です。一瞬ですね。

### 正規表現置換でブログ本文を修正

そのままではリンク等が壊れていたところがあったのでそこを適当に直しました。

手で直すには膨大すぎる量なので全部正規表現で置換し Python にやらせました。面倒なことは Python にやらせよう。

- $\TeX$ 打ちがぶっ壊れてた

はてなブログでは `[tex: 数式]` と打たないと数式を表示してくれません。Hugo だと通常の $\TeX$ 同様 `$数式$` でやってくれるので書きやすいです。

それに、はてなブログでは `^` や `_` 、 `&` といったよく使う記号も `\` でエスケープしないといけないのも非常に不便でした。

これらのはてなブログ特有の事情で書かれた数式を全部正規表現で置換しました。競プロ解説記事に膨大な数式を書いているので手作業で直すとかしたくなかった。

- Twitter埋め込みが死んでた

Hugo 特有の記法 (shortcode) で書けるのでそれに直しました。

- はてなブログの写真リンクが切れてた

はてなブログの写真投稿サービス fotolife のリンクが切れていました。

どういうことかリンクの 1 文字が間違っていたようなので（？？？）、それを直しただけで上手くいきました。何？

- その他

カテゴリー分けとか軽微なものを全部直しました。一気に変換できるものは Python にやらせて、残り数個の壊れてる要素は手で書き直しました。

## おわりに

散逸していた情報がまとまりました。やったー

## 今後やりたいこと

- カテゴリー・タグを見やすくする
